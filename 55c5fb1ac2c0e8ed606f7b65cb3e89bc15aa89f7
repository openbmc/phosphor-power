{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "7bbe122c_76b059d5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 16,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2022-02-14T22:27:50Z",
      "side": 1,
      "message": "I need to think more about presence being included in here.  The redfish code already checks for presence when setting the State so it can get set to Absent.\n\nWhen a PS is missing:\na) on startup\n  - There will be an error log with a FRU callout that would set Functional to false, and hence Health to Critical (and State to Absent)\nb) at runtime\n - The AC cable would have to be removed first, leading to an input fault which would set available to false and Redfish Health would be Critical and State \u003d UnavailableOffline (with upcoming bmcweb change)",
      "range": {
        "startLine": 16,
        "startChar": 1,
        "endLine": 16,
        "endChar": 19
      },
      "revId": "55c5fb1ac2c0e8ed606f7b65cb3e89bc15aa89f7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dcc35fd1_1734b78b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 16,
      "author": {
        "id": 1000318
      },
      "writtenOn": "2022-02-14T23:42:32Z",
      "side": 1,
      "message": "we\u0027ll deglitch the input fault 3 times (3 sec), so if the CE pulls AC cable then pulls psu out within 3 sec, we\u0027d still want status updated... ie, there\u0027s no guarantee there will be a input fault PEL logged.",
      "parentUuid": "7bbe122c_76b059d5",
      "range": {
        "startLine": 16,
        "startChar": 1,
        "endLine": 16,
        "endChar": 19
      },
      "revId": "55c5fb1ac2c0e8ed606f7b65cb3e89bc15aa89f7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b5c69106_1a4bdccd",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 16,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2022-02-15T14:32:37Z",
      "side": 1,
      "message": "Thanks.\n\nFor the configs that only require 2 PSUs as opposed to 4, is it possible someone would actually plug in more?  The available check only runs if something was present in the first place, but what if:\n* User plugs in 3 PSs even though they only need 2\n* User notices that and removes one\n* Its presence and available state change to false\n* No PSU missing error is logged because there\u0027s an valid config check first which passes\n* Because not available, status of the 3rd PS shows Critical in the web ui?",
      "parentUuid": "dcc35fd1_1734b78b",
      "range": {
        "startLine": 16,
        "startChar": 1,
        "endLine": 16,
        "endChar": 19
      },
      "revId": "55c5fb1ac2c0e8ed606f7b65cb3e89bc15aa89f7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6c1d8521_414d7815",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 16,
      "author": {
        "id": 1000318
      },
      "writtenOn": "2022-02-15T17:23:29Z",
      "side": 1,
      "message": "It\u0027s possible for them to plug in more, but I\u0027m not too worried about the gui being perfect if they do extra plugs/unplugs.  As long as we don\u0027t say missing ones are \"critical\" when they correctly have only ever had 2 of the 4 plugged in, good enough.  If they have to reboot the bmc after doing the extra add/remove to get the gui looking good again, so be it.",
      "parentUuid": "b5c69106_1a4bdccd",
      "range": {
        "startLine": 16,
        "startChar": 1,
        "endLine": 16,
        "endChar": 19
      },
      "revId": "55c5fb1ac2c0e8ed606f7b65cb3e89bc15aa89f7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4f9b4752_592e6d1b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 16,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2022-02-15T17:35:26Z",
      "side": 1,
      "message": "Makes sense.\nAnother situation I thought of.  The PSU polling is still happening with power off, so the available property would also be accurate then.  If someone were to look at Redfish/the web UI then, it could show Critical/UnavailableOffline.  Is that a problem do you think?",
      "parentUuid": "6c1d8521_414d7815",
      "range": {
        "startLine": 16,
        "startChar": 1,
        "endLine": 16,
        "endChar": 19
      },
      "revId": "55c5fb1ac2c0e8ed606f7b65cb3e89bc15aa89f7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a44b6d15_8bfb0201",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 16,
      "author": {
        "id": 1000318
      },
      "writtenOn": "2022-02-15T18:38:59Z",
      "side": 1,
      "message": "sorry, when would it show critical/unavailableoffline when the system is powered off?",
      "parentUuid": "4f9b4752_592e6d1b",
      "range": {
        "startLine": 16,
        "startChar": 1,
        "endLine": 16,
        "endChar": 19
      },
      "revId": "55c5fb1ac2c0e8ed606f7b65cb3e89bc15aa89f7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5170f3ce_59f37417",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 16,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2022-02-15T18:54:49Z",
      "side": 1,
      "message": "For example if the cord was unplugged, then hasInputFault would return true even with power off:\n\n    bool hasInputFault() const\n    {\n        return (inputFault \u003e\u003d DEGLITCH_LIMIT);\n    }",
      "parentUuid": "a44b6d15_8bfb0201",
      "range": {
        "startLine": 16,
        "startChar": 1,
        "endLine": 16,
        "endChar": 19
      },
      "revId": "55c5fb1ac2c0e8ed606f7b65cb3e89bc15aa89f7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "37901115_3eead222",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 16,
      "author": {
        "id": 1000318
      },
      "writtenOn": "2022-02-15T18:58:27Z",
      "side": 1,
      "message": "ok, no I don\u0027t think thats a problem.. we\u0027re not logging power errors until the system is powered on, but the gui status might be an early notification that something is wrong...",
      "parentUuid": "5170f3ce_59f37417",
      "range": {
        "startLine": 16,
        "startChar": 1,
        "endLine": 16,
        "endChar": 19
      },
      "revId": "55c5fb1ac2c0e8ed606f7b65cb3e89bc15aa89f7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "21f9d2a9_1d717e42",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 16,
      "author": {
        "id": 1000085
      },
      "writtenOn": "2022-02-16T21:15:45Z",
      "side": 1,
      "message": "Not logging errors if the power is not on. The PSUManager only checks if it should log errors if powerOn is true: https://github.com/openbmc/phosphor-power/blob/e4c3a299cefd56c3bfebdb7f2cb36f88b91f4981/phosphor-power-supply/psu_manager.cpp#L426",
      "parentUuid": "37901115_3eead222",
      "range": {
        "startLine": 16,
        "startChar": 1,
        "endLine": 16,
        "endChar": 19
      },
      "revId": "55c5fb1ac2c0e8ed606f7b65cb3e89bc15aa89f7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ea4ab538_20ad547e",
        "filename": "phosphor-power-supply/power_supply.hpp",
        "patchSetId": 2
      },
      "lineNbr": 418,
      "author": {
        "id": 1000318
      },
      "writtenOn": "2022-02-14T23:37:44Z",
      "side": 1,
      "message": "hmmm I wonder about CML\u0026comm fails.  looks like we do CALLOUT_DEVICE_PATH for callout for those errors, so that should result in PEL code setting the operational functional status to false for the psu, right?",
      "revId": "55c5fb1ac2c0e8ed606f7b65cb3e89bc15aa89f7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0a075b1_2cd0586b",
        "filename": "phosphor-power-supply/power_supply.hpp",
        "patchSetId": 2
      },
      "lineNbr": 418,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2022-02-15T14:32:37Z",
      "side": 1,
      "message": "yep, that\u0027s right.",
      "parentUuid": "ea4ab538_20ad547e",
      "revId": "55c5fb1ac2c0e8ed606f7b65cb3e89bc15aa89f7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7d15c449_14df9fed",
        "filename": "phosphor-power-supply/power_supply.hpp",
        "patchSetId": 2
      },
      "lineNbr": 418,
      "author": {
        "id": 1000085
      },
      "writtenOn": "2022-02-16T21:15:45Z",
      "side": 1,
      "message": "The power supplies, at least the IBM power supplies, can/do shutdown if a 12V over-voltage condition is detected. Should that be included?\n\nIf I am reading things correctly, a 12V under-voltage can also lead to a shutdown, after a delay.",
      "parentUuid": "a0a075b1_2cd0586b",
      "revId": "55c5fb1ac2c0e8ed606f7b65cb3e89bc15aa89f7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f7536b3a_f17c61df",
        "filename": "phosphor-power-supply/test/power_supply_tests.cpp",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2022-02-14T22:06:51Z",
      "side": 1,
      "message": "I didn\u0027t add expect calls for Available for every possible fault, but I probably could if desired.",
      "revId": "55c5fb1ac2c0e8ed606f7b65cb3e89bc15aa89f7",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}