{
  "comments": [
    {
      "key": {
        "uuid": "dd4281b2_abde5111",
        "filename": "phosphor-power-supply/psu_manager.cpp",
        "patchSetId": 4
      },
      "lineNbr": 279,
      "author": {
        "id": 1000331
      },
      "writtenOn": "2021-04-08T19:45:41Z",
      "side": 1,
      "message": "If EM hasn\u0027t put the data needed for this yet on D-Bus, does it get checked later when the data is available?  Do we need a call to validateConfig() in the signal handler for EM interfaces added?",
      "revId": "039c62a8354ab22e6ddb7720d831171b5c6ec0b0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5bdaa3ed_c15243de",
        "filename": "phosphor-power-supply/psu_manager.cpp",
        "patchSetId": 4
      },
      "lineNbr": 279,
      "author": {
        "id": 1000003
      },
      "writtenOn": "2021-04-12T19:02:54Z",
      "side": 1,
      "message": "The challenge is that individual EM interfaces trigger the callback, so we don\u0027t know when all the interfaces are done being added to trigger the validation. I think we\u0027re ok on this rare case when the EM interfaces are not present and power on is issued, especially with the new regulators code that would block the power on until EM is present? https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-power/+/41824",
      "parentUuid": "dd4281b2_abde5111",
      "revId": "039c62a8354ab22e6ddb7720d831171b5c6ec0b0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "92691471_35e20b54",
        "filename": "phosphor-power-supply/psu_manager.cpp",
        "patchSetId": 4
      },
      "lineNbr": 279,
      "author": {
        "id": 1000331
      },
      "writtenOn": "2021-04-13T14:48:39Z",
      "side": 1,
      "message": "Is the issue that you need one xyz.openbmc_project.Configuration.SupportedConfiguration interface to be found as well as N copies of the xyz.openbmc_project.Configuration.IBMCFFPSConnector interface before config validation can be done?\n\nDoes the power state change after pgoods have been established?  If so, you are correct that this code will run after the regulators app has waited for EM to publish the compatible systems interface.  I\u0027m not sure if there is a case where EM has published that interface but not the ones you are looking for.\n\nBrandon, what do you think here?",
      "parentUuid": "5bdaa3ed_c15243de",
      "revId": "039c62a8354ab22e6ddb7720d831171b5c6ec0b0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c166208f_d400dc13",
        "filename": "phosphor-power-supply/psu_manager.cpp",
        "patchSetId": 4
      },
      "lineNbr": 279,
      "author": {
        "id": 1000085
      },
      "writtenOn": "2021-04-13T16:29:24Z",
      "side": 1,
      "message": "I thought I saw some cases where that Compatible interface stuff showed up prior to the IBMCFFPSConnector interfaces. I wonder if it was seen as more obvious when I had some debug tracing put in when trying to get the inerfacesAdded for IBMCFFPSConnector.\n\nIt would seem that maybe we would want to check if the interfacesAdded happens when the power is already on, but we probably would not want to run that twice.",
      "parentUuid": "92691471_35e20b54",
      "revId": "039c62a8354ab22e6ddb7720d831171b5c6ec0b0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "79f222c9_9cf9ab84",
        "filename": "phosphor-power-supply/psu_manager.cpp",
        "patchSetId": 4
      },
      "lineNbr": 421,
      "author": {
        "id": 1000003
      },
      "writtenOn": "2021-04-07T19:27:11Z",
      "side": 1,
      "message": "Changed it to string, since need the model to stick around for the subsequent validation in the next commit.",
      "revId": "039c62a8354ab22e6ddb7720d831171b5c6ec0b0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a66932b8_24f77f49",
        "filename": "phosphor-power-supply/psu_manager.cpp",
        "patchSetId": 4
      },
      "lineNbr": 441,
      "author": {
        "id": 1000331
      },
      "writtenOn": "2021-04-08T19:45:41Z",
      "side": 1,
      "message": "Since you are assigning into a std::string, is there a reason to use the C style string?  Same question on line below.",
      "range": {
        "startLine": 441,
        "startChar": 47,
        "endLine": 441,
        "endChar": 60
      },
      "revId": "039c62a8354ab22e6ddb7720d831171b5c6ec0b0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f6049376_3f303bb4",
        "filename": "phosphor-power-supply/psu_manager.cpp",
        "patchSetId": 4
      },
      "lineNbr": 441,
      "author": {
        "id": 1000003
      },
      "writtenOn": "2021-04-12T19:02:54Z",
      "side": 1,
      "message": "Done. Ugh thanks, just habit since the phosphor-logging APIs only take C strings.",
      "parentUuid": "a66932b8_24f77f49",
      "range": {
        "startLine": 441,
        "startChar": 47,
        "endLine": 441,
        "endChar": 60
      },
      "revId": "039c62a8354ab22e6ddb7720d831171b5c6ec0b0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "be99761f_e3cdb36c",
        "filename": "phosphor-power-supply/psu_manager.cpp",
        "patchSetId": 4
      },
      "lineNbr": 442,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2021-04-07T21:32:21Z",
      "side": 1,
      "message": "Would this need a FRU callout?\n\nIf nothing else, maybe you could put the inventory paths of the PSs in the additionalData assuming you can get it from the object.",
      "revId": "039c62a8354ab22e6ddb7720d831171b5c6ec0b0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d782c544_adda9557",
        "filename": "phosphor-power-supply/psu_manager.cpp",
        "patchSetId": 4
      },
      "lineNbr": 442,
      "author": {
        "id": 1000003
      },
      "writtenOn": "2021-04-12T19:02:54Z",
      "side": 1,
      "message": "Added the inventory path for now until we hear if a FRU callout is needed.",
      "parentUuid": "be99761f_e3cdb36c",
      "revId": "039c62a8354ab22e6ddb7720d831171b5c6ec0b0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "204a5dc7_1bd9bea3",
        "filename": "phosphor-power-supply/psu_manager.cpp",
        "patchSetId": 4
      },
      "lineNbr": 442,
      "author": {
        "id": 1000085
      },
      "writtenOn": "2021-04-13T16:44:37Z",
      "side": 1,
      "message": "Looks like we used to basically point to the first power supply that we thought was not what it should be, with the PWRSPLY symbolic FRU, to an SRC for power supply missing. I am not sure if we want to mimic that for this or not. Adding the inventory path sounds good though.",
      "parentUuid": "d782c544_adda9557",
      "revId": "039c62a8354ab22e6ddb7720d831171b5c6ec0b0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d8c3dc2d_21094aa7",
        "filename": "phosphor-power-supply/psu_manager.hpp",
        "patchSetId": 4
      },
      "lineNbr": 86,
      "author": {
        "id": 1000331
      },
      "writtenOn": "2021-04-08T19:45:41Z",
      "side": 1,
      "message": "Do you need to add a call to validateConfig() here (poll for power state) to match the call in powerStateChanged() (callback for power state change)?",
      "revId": "039c62a8354ab22e6ddb7720d831171b5c6ec0b0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b0a8d7f9_2c989da3",
        "filename": "phosphor-power-supply/psu_manager.hpp",
        "patchSetId": 4
      },
      "lineNbr": 86,
      "author": {
        "id": 1000003
      },
      "writtenOn": "2021-04-12T19:02:54Z",
      "side": 1,
      "message": "Done. Yeah, i can see a scenario where the cec is at powered on, and the BMC is rebooted, so when the psu-monitor app starts up, the state is already set to power on. Added it.",
      "parentUuid": "d8c3dc2d_21094aa7",
      "revId": "039c62a8354ab22e6ddb7720d831171b5c6ec0b0",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    }
  ]
}